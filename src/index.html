<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>URL Detective - Validate URLs & Play Game</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      }

      :root {
        --primary: #6e8efb;
        --secondary: #a777e3;
        --success: #2ecc71;
        --danger: #e74c3c;
        --warning: #f39c12;
        --dark: #2c3e50;
        --light: #ecf0f1;
      }

      body {
        background: linear-gradient(135deg, var(--primary), var(--secondary));
        min-height: 100vh;
        color: #333;
        padding: 20px;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
      }

      header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 20px 0;
        margin-bottom: 30px;
      }

      .logo {
        display: flex;
        align-items: center;
        gap: 10px;
        color: white;
        font-size: 1.8rem;
        font-weight: bold;
      }

      .logo i {
        background: white;
        color: var(--primary);
        width: 50px;
        height: 50px;
        border-radius: 50%;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      nav ul {
        display: flex;
        list-style: none;
        gap: 20px;
      }

      nav a {
        color: white;
        text-decoration: none;
        font-weight: 500;
        padding: 8px 15px;
        border-radius: 20px;
        transition: background 0.3s;
      }

      nav a:hover,
      nav a.active {
        background: rgba(255, 255, 255, 0.2);
      }

      .tab-content {
        display: none;
      }

      .tab-content.active {
        display: block;
      }

      .card {
        background: rgba(255, 255, 255, 0.95);
        border-radius: 20px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
        padding: 30px;
        margin-bottom: 30px;
      }

      h1 {
        color: var(--dark);
        margin-bottom: 20px;
        font-size: 2.5rem;
      }

      h2 {
        color: var(--dark);
        margin-bottom: 15px;
        font-size: 2rem;
      }

      h3 {
        color: var(--dark);
        margin-bottom: 15px;
        font-size: 1.5rem;
      }

      p {
        margin-bottom: 15px;
        line-height: 1.6;
      }

      /* URL Checker Styles */
      .input-group {
        display: flex;
        gap: 15px;
        margin-bottom: 20px;
      }

      input[type="text"] {
        flex: 1;
        padding: 15px;
        border: 2px solid #ddd;
        border-radius: 10px;
        font-size: 1.1rem;
        transition: border-color 0.3s;
      }

      input[type="text"]:focus {
        outline: none;
        border-color: var(--primary);
      }

      button {
        padding: 15px 30px;
        border: none;
        border-radius: 10px;
        font-size: 1.1rem;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s;
      }

      .btn-primary {
        background: var(--primary);
        color: white;
      }

      .btn-primary:hover {
        background: #5a7ce2;
        transform: translateY(-3px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      }

      .result-box {
        padding: 20px;
        border-radius: 10px;
        margin-bottom: 20px;
        display: flex;
        align-items: center;
        gap: 15px;
      }

      .valid {
        background: rgba(46, 204, 113, 0.2);
        border: 2px solid var(--success);
      }

      .invalid {
        background: rgba(231, 76, 60, 0.2);
        border: 2px solid var(--danger);
      }

      .result-icon {
        font-size: 2.5rem;
      }

      .result-text h4 {
        font-size: 1.5rem;
        margin-bottom: 5px;
      }

      .features {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin-top: 30px;
      }

      .feature {
        text-align: center;
        padding: 20px;
        background: rgba(236, 240, 241, 0.5);
        border-radius: 10px;
      }

      .feature-icon {
        width: 60px;
        height: 60px;
        background: var(--primary);
        color: white;
        border-radius: 50%;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 1.5rem;
        margin: 0 auto 15px;
      }

      /* Game Styles */
      .game-info {
        display: flex;
        justify-content: space-between;
        margin-bottom: 20px;
        padding: 15px;
        background: #f8f9fa;
        border-radius: 10px;
      }

      .score,
      .level,
      .stage {
        font-size: 1.2rem;
        font-weight: bold;
        color: var(--primary);
      }

      .url-container {
        display: grid;
        grid-template-columns: 1fr;
        gap: 15px;
        margin-bottom: 20px;
      }

      .url-option {
        background: white;
        border: 2px solid #ddd;
        border-radius: 10px;
        padding: 15px;
        font-size: 1.1rem;
        cursor: pointer;
        transition: all 0.3s;
        text-align: left;
        word-break: break-all;
      }

      .url-option:hover {
        transform: translateY(-3px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        border-color: var(--secondary);
      }

      .controls {
        display: flex;
        justify-content: center;
        gap: 15px;
        margin-bottom: 20px;
      }

      .difficulty-btns {
        display: flex;
        justify-content: center;
        gap: 10px;
        margin-bottom: 20px;
      }

      .difficulty-btn {
        padding: 10px 20px;
        background: #ddd;
        color: #333;
      }

      .difficulty-btn.active {
        background: var(--secondary);
        color: white;
      }

      .result {
        font-size: 1.5rem;
        font-weight: bold;
        margin: 20px 0;
        min-height: 40px;
        text-align: center;
      }

      .correct {
        color: var(--success);
      }

      .incorrect {
        color: var(--danger);
      }

      .timer {
        font-size: 1.2rem;
        margin-bottom: 15px;
        color: var(--danger);
        font-weight: bold;
        text-align: center;
      }

      .instructions {
        background: #f9f9f9;
        padding: 20px;
        border-radius: 10px;
        margin-bottom: 20px;
      }

      .instructions ul {
        padding-left: 20px;
        margin-bottom: 15px;
      }

      .instructions li {
        margin-bottom: 8px;
      }

      .progress-bar {
        height: 10px;
        background: #eee;
        border-radius: 5px;
        margin-bottom: 20px;
        overflow: hidden;
      }

      .progress {
        height: 100%;
        background: linear-gradient(90deg, var(--primary), var(--secondary));
        width: 0%;
        transition: width 0.3s;
      }

      /* Responsive Design */
      @media (max-width: 768px) {
        header {
          flex-direction: column;
          text-align: center;
          gap: 15px;
        }

        nav ul {
          justify-content: center;
        }

        .input-group {
          flex-direction: column;
        }

        h1 {
          font-size: 2rem;
        }

        h2 {
          font-size: 1.8rem;
        }
      }

      @media (max-width: 500px) {
        .logo {
          font-size: 1.5rem;
        }

        nav ul {
          flex-wrap: wrap;
          justify-content: center;
        }

        .card {
          padding: 20px;
        }

        .url-option {
          padding: 12px;
          font-size: 1rem;
        }

        button {
          padding: 12px 25px;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <header>
        <div class="logo">
          <i class="fas fa-link"></i>
          <span>URL Detective</span>
        </div>
        <nav>
          <ul>
            <li>
              <a href="#" class="active nav-link" data-tab="checker"
                >URL Checker</a
              >
            </li>
            <li><a href="#" class="nav-link" data-tab="game">URL Game</a></li>
          </ul>
        </nav>
      </header>

      <main>
        <!-- URL Checker Tab -->
        <div class="tab-content active" id="checker">
          <div class="card">
            <h2>URL Validation Tool</h2>
            <p>Check if your URLs are valid and secure</p>

            <div class="input-group">
              <input
                type="text"
                id="url-input"
                placeholder="Enter URL to validate (e.g., https://example.com)"
              />
              <button class="btn-primary" id="validate-btn">
                Validate URL
              </button>
            </div>

            <div id="validation-result" class="hidden">
              <!-- Result will be shown here -->
            </div>

            <div class="features">
              <div class="feature">
                <div class="feature-icon">
                  <i class="fas fa-lock"></i>
                </div>
                <h3>Protocol Check</h3>
                <p>Validates HTTPS/HTTP protocols</p>
              </div>
              <div class="feature">
                <div class="feature-icon">
                  <i class="fas fa-globe"></i>
                </div>
                <h3>Domain Validation</h3>
                <p>Checks domain format and TLD</p>
              </div>
              <div class="feature">
                <div class="feature-icon">
                  <i class="fas fa-shield-alt"></i>
                </div>
                <h3>Security Analysis</h3>
                <p>Detects suspicious patterns</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Game Tab -->
        <div class="tab-content" id="game">
          <div class="card">
            <h2>URL Detective Game</h2>

            <div class="instructions">
              <h3>How to Play:</h3>
              <ul>
                <li>Select the difficulty level (Easy, Medium, Hard)</li>
                <li>Click START to begin the game</li>
                <li>You'll see multiple URLs - one is invalid</li>
                <li>Click on the invalid URL as quickly as possible</li>
                <li>Score is based on how fast you identify the invalid URL</li>
                <li>Complete all 5 stages in each difficulty level</li>
              </ul>
            </div>

            <div class="difficulty-btns">
              <button class="difficulty-btn active" data-difficulty="easy">
                Easy
              </button>
              <button class="difficulty-btn" data-difficulty="medium">
                Medium
              </button>
              <button class="difficulty-btn" data-difficulty="hard">
                Hard
              </button>
            </div>

            <div class="controls">
              <button id="start-btn" class="btn-primary">START GAME</button>
            </div>

            <div id="game-area" class="hidden">
              <div class="game-info">
                <div class="score">Score: <span id="score">0</span></div>
                <div class="level">Level: <span id="level">Easy</span></div>
                <div class="stage">Stage: <span id="stage">1/5</span></div>
              </div>

              <div class="progress-bar">
                <div class="progress" id="progress"></div>
              </div>

              <div class="timer">Time: <span id="timer">0</span>s</div>

              <div class="url-container" id="url-container">
                <!-- URL options will be generated here -->
              </div>

              <div class="result" id="result"></div>

              <div class="controls">
                <button id="next-btn" class="hidden">Next Stage</button>
                <button id="restart-btn">Restart</button>
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>

    <script>
      // URL Validation Functionality
      function validateURL(url) {
        try {
          // Basic validation
          if (!url) {
            return {
              isValid: false,
              message: "Please enter a URL",
              details: ["No URL provided"],
            };
          }

          // Check if the URL has a protocol
          if (!url.startsWith("http://") && !url.startsWith("https://")) {
            return {
              isValid: false,
              message: "Invalid URL - Missing protocol",
              details: ["URL should start with http:// or https://"],
            };
          }

          // Try to create a URL object (this will throw for invalid URLs)
          const urlObj = new URL(url);

          // Check for valid domain
          const domainParts = urlObj.hostname.split(".");
          if (domainParts.length < 2 || domainParts.some((part) => !part)) {
            return {
              isValid: false,
              message: "Invalid domain name",
              details: ["The domain name appears to be malformed"],
            };
          }

          // Check for suspicious characters
          if (url.includes("@@") || url.includes("//") || url.includes("..")) {
            return {
              isValid: false,
              message: "Suspicious URL pattern detected",
              details: ["URL contains potentially dangerous patterns"],
            };
          }

          // If all checks pass
          return {
            isValid: true,
            message: "This URL appears to be valid",
            parsedURL: {
              protocol: urlObj.protocol,
              host: urlObj.host,
              hostname: urlObj.hostname,
              pathname: urlObj.pathname,
              search: urlObj.search,
              hash: urlObj.hash,
            },
          };
        } catch (error) {
          return {
            isValid: false,
            message: "Invalid URL format",
            details: [error.toString()],
          };
        }
      }

      // Game data
      const gameData = {
        easy: [
          {
            valid: [
              "https://www.google.com",
              "https://www.github.com",
              "https://stackoverflow.com",
            ],
            invalid: "htt://www.invalid.com",
          },
          {
            valid: [
              "https://www.wikipedia.org",
              "https://www.reddit.com",
              "https://www.linkedin.com",
            ],
            invalid: "https://www.invalid.123",
          },
          {
            valid: [
              "https://www.amazon.com",
              "https://www.netflix.com",
              "https://www.ebay.com",
            ],
            invalid: "https://www.invalid-.com",
          },
          {
            valid: [
              "https://www.twitter.com",
              "https://www.instagram.com",
              "https://www.pinterest.com",
            ],
            invalid: "https://www.invalid space.com",
          },
          {
            valid: [
              "https://www.microsoft.com",
              "https://www.apple.com",
              "https://www.adobe.com",
            ],
            invalid: "https://www.invalid@character.com",
          },
        ],
        medium: [
          {
            valid: [
              "https://sub.domain.com/path",
              "https://example.com:8080/page",
              "https://user:pass@example.com",
            ],
            invalid: "https://..example.com",
          },
          {
            valid: [
              "https://example.com/?query=value",
              "https://example.com/#fragment",
              "https://example.com/path/to/page",
            ],
            invalid: "https://example.com/../invalid",
          },
          {
            valid: [
              "https://example.com",
              "http://example.com",
              "ftp://example.com",
            ],
            invalid: "https://example.com:65536",
          },
          {
            valid: [
              "https://example.com",
              "https://192.168.1.1",
              "https://localhost:3000",
            ],
            invalid: "https://256.256.256.256",
          },
          {
            valid: [
              "https://example.com",
              "https://www.example.co.uk",
              "https://sub.sub.example.com",
            ],
            invalid: "https://example.-com.com",
          },
        ],
        hard: [
          {
            valid: [
              "https://example.com/测试",
              "https://example.com/🦄",
              "https://пример.тест",
            ],
            invalid: "https://example.com/\\x00",
          },
          {
            valid: [
              "https://example.com",
              "https://xn--example-8g0a.com",
              "https://example.com/?a=1&b=2",
            ],
            invalid: "https://example.com/?a=script>alert('xss')</script",
          },
          {
            valid: [
              "https://example.com",
              "https://1.2.3.4",
              "https://[2001:db8::1]",
            ],
            invalid: "https://[2001:db8:::1]",
          },
          {
            valid: [
              "https://example.com",
              "https://example.com:65535",
              "https://example.com:0",
            ],
            invalid: "https://example.com:99999",
          },
          {
            valid: [
              "https://example.com",
              "https://example.com/very/long/path/that/is/valid",
              "https://example.com/?very=long&query=string&with=many=parameters",
            ],
            invalid: "https://example.com/" + "a".repeat(10000),
          },
        ],
      };

      // Game state
      let gameState = {
        difficulty: "easy",
        currentStage: 0,
        score: 0,
        startTime: 0,
        timerInterval: null,
        currentTime: 0,
      };

      // DOM elements
      const navLinks = document.querySelectorAll(".nav-link");
      const tabContents = document.querySelectorAll(".tab-content");
      const urlInput = document.getElementById("url-input");
      const validateBtn = document.getElementById("validate-btn");
      const validationResult = document.getElementById("validation-result");
      const startScreen = document.getElementById("game-area");
      const startBtn = document.getElementById("start-btn");
      const restartBtn = document.getElementById("restart-btn");
      const nextBtn = document.getElementById("next-btn");
      const scoreElement = document.getElementById("score");
      const levelElement = document.getElementById("level");
      const stageElement = document.getElementById("stage");
      const urlContainer = document.getElementById("url-container");
      const resultElement = document.getElementById("result");
      const timerElement = document.getElementById("timer");
      const progressElement = document.getElementById("progress");
      const difficultyBtns = document.querySelectorAll(".difficulty-btn");

      // Initialize application
      function initApp() {
        // Set up event listeners for navigation
        navLinks.forEach((link) => {
          link.addEventListener("click", (e) => {
            e.preventDefault();
            const tab = link.dataset.tab;

            // Update active nav link
            navLinks.forEach((l) => l.classList.remove("active"));
            link.classList.add("active");

            // Show corresponding tab
            tabContents.forEach((content) =>
              content.classList.remove("active")
            );
            document.getElementById(tab).classList.add("active");
          });
        });

        // Set up URL validation
        validateBtn.addEventListener("click", validateUrl);
        urlInput.addEventListener("keypress", (e) => {
          if (e.key === "Enter") validateUrl();
        });

        // Set up game
        initGame();
      }

      // Validate URL function
      function validateUrl() {
        const url = urlInput.value.trim();
        if (!url) return;

        const result = validateURL(url);
        showValidationResult(result);
      }

      // Show validation result
      function showValidationResult(result) {
        validationResult.className = "result-box";
        validationResult.classList.add(result.isValid ? "valid" : "invalid");
        validationResult.classList.remove("hidden");

        validationResult.innerHTML = `
                <div class="result-icon">
                    <i class="fas ${
                      result.isValid ? "fa-check-circle" : "fa-times-circle"
                    }"></i>
                </div>
                <div class="result-text">
                    <h4>${result.isValid ? "Valid URL" : "Invalid URL"}</h4>
                    <p>${result.message}</p>
                    ${
                      result.details
                        ? `
                        <ul>
                            ${result.details
                              .map((detail) => `<li>${detail}</li>`)
                              .join("")}
                        </ul>
                    `
                        : ""
                    }
                    ${
                      result.parsedURL
                        ? `
                        <div class="url-details">
                            <p><strong>Protocol:</strong> ${
                              result.parsedURL.protocol
                            }</p>
                            <p><strong>Host:</strong> ${
                              result.parsedURL.host
                            }</p>
                            <p><strong>Path:</strong> ${
                              result.parsedURL.pathname || "/"
                            }</p>
                        </div>
                    `
                        : ""
                    }
                </div>
            `;
      }

      // Initialize game
      function initGame() {
        // Set up event listeners
        startBtn.addEventListener("click", startGame);
        restartBtn.addEventListener("click", restartGame);
        nextBtn.addEventListener("click", nextStage);

        // Set up difficulty buttons
        difficultyBtns.forEach((btn) => {
          btn.addEventListener("click", () => {
            difficultyBtns.forEach((b) => b.classList.remove("active"));
            btn.classList.add("active");
            gameState.difficulty = btn.dataset.difficulty;
          });
        });
      }

      // Start the game
      function startGame() {
        startBtn.classList.add("hidden");
        document.querySelector(".difficulty-btns").classList.add("hidden");
        startScreen.classList.remove("hidden");

        gameState.currentStage = 0;
        gameState.score = 0;
        updateUI();

        loadStage();
      }

      // Load current stage
      function loadStage() {
        const stageData =
          gameData[gameState.difficulty][gameState.currentStage];
        const allUrls = [...stageData.valid, stageData.invalid];

        // Shuffle URLs
        shuffleArray(allUrls);

        // Clear URL container
        urlContainer.innerHTML = "";

        // Create URL options
        allUrls.forEach((url) => {
          const urlElement = document.createElement("div");
          urlElement.classList.add("url-option");
          urlElement.textContent = url;
          urlElement.addEventListener("click", () =>
            checkAnswer(url, urlElement)
          );
          urlContainer.appendChild(urlElement);
        });

        // Start timer
        startTimer();

        // Reset result
        resultElement.textContent = "";
        resultElement.className = "result";

        // Hide next button
        nextBtn.classList.add("hidden");
      }

      // Check if answer is correct
      function checkAnswer(url, element) {
        const stageData =
          gameData[gameState.difficulty][gameState.currentStage];
        const isInvalid = url === stageData.invalid;

        // Stop timer
        stopTimer();

        if (isInvalid) {
          // Correct answer
          const timeTaken = gameState.currentTime;
          const points = calculatePoints(timeTaken);
          gameState.score += points;

          element.style.borderColor = "var(--success)";
          element.style.background = "#e8f5e9";
          resultElement.textContent = `Correct! +${points} points`;
          resultElement.className = "result correct";
        } else {
          // Incorrect answer
          element.style.borderColor = "var(--danger)";
          element.style.background = "#ffebee";

          // Highlight the correct answer
          const urlElements = document.querySelectorAll(".url-option");
          urlElements.forEach((el) => {
            if (el.textContent === stageData.invalid) {
              el.style.borderColor = "var(--success)";
              el.style.background = "#e8f5e9";
            }
          });

          resultElement.textContent = "Incorrect! The URL above is invalid";
          resultElement.className = "result incorrect";
        }

        // Show next button or finish game
        if (gameState.currentStage < 4) {
          nextBtn.classList.remove("hidden");
        } else {
          nextBtn.textContent = "See Results";
          nextBtn.classList.remove("hidden");
        }

        updateUI();
      }

      // Calculate points based on time taken
      function calculatePoints(timeTaken) {
        const maxPoints = 1000;
        let points = Math.max(maxPoints - timeTaken * 20, 100);

        // Adjust points based on difficulty
        if (gameState.difficulty === "medium") points *= 1.5;
        if (gameState.difficulty === "hard") points *= 2;

        return Math.round(points);
      }

      // Move to next stage
      function nextStage() {
        if (gameState.currentStage < 4) {
          gameState.currentStage++;
          loadStage();
        } else {
          // Game finished
          resultElement.textContent = `Game Over! Final Score: ${gameState.score}`;
          resultElement.className = "result";
          nextBtn.classList.add("hidden");

          // Disable URL options
          const urlElements = document.querySelectorAll(".url-option");
          urlElements.forEach((el) => {
            el.style.pointerEvents = "none";
          });
        }
      }

      // Restart game
      function restartGame() {
        stopTimer();
        startScreen.classList.add("hidden");
        document.querySelector(".difficulty-btns").classList.remove("hidden");
        startBtn.classList.remove("hidden");
      }

      // Start timer
      function startTimer() {
        gameState.startTime = Date.now();
        gameState.currentTime = 0;
        timerElement.textContent = "0";

        if (gameState.timerInterval) clearInterval(gameState.timerInterval);

        gameState.timerInterval = setInterval(() => {
          gameState.currentTime = (Date.now() - gameState.startTime) / 1000;
          timerElement.textContent = gameState.currentTime.toFixed(1);

          // Update progress bar (max 15 seconds per question)
          const progressPercent = Math.min(
            (gameState.currentTime / 15) * 100,
            100
          );
          progressElement.style.width = `${progressPercent}%`;

          // Change color when time is running out
          if (gameState.currentTime > 10) {
            progressElement.style.background = "var(--danger)";
          } else if (gameState.currentTime > 5) {
            progressElement.style.background = "var(--warning)";
          }
        }, 100);
      }

      // Stop timer
      function stopTimer() {
        if (gameState.timerInterval) {
          clearInterval(gameState.timerInterval);
          gameState.timerInterval = null;
        }
      }

      // Update UI elements
      function updateUI() {
        scoreElement.textContent = gameState.score;
        levelElement.textContent =
          gameState.difficulty.charAt(0).toUpperCase() +
          gameState.difficulty.slice(1);
        stageElement.textContent = `${gameState.currentStage + 1}/5`;
      }

      // Utility function to shuffle array
      function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
      }

      // Initialize the application when page loads
      window.addEventListener("load", initApp);
    </script>
  </body>
</html>
