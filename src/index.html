<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>URL Guardian - Advanced Cybersecurity Education</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      }

      :root {
        --primary: #6e8efb;
        --secondary: #a777e3;
        --success: #2ecc71;
        --danger: #e74c3c;
        --warning: #f39c12;
        --info: #3498db;
        --dark: #2c3e50;
        --light: #ecf0f1;
      }

      body {
        background: linear-gradient(135deg, var(--primary), var(--secondary));
        min-height: 100vh;
        color: #333;
        padding: 20px;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
      }

      header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 20px 0;
        margin-bottom: 30px;
      }

      .logo {
        display: flex;
        align-items: center;
        gap: 10px;
        color: white;
        font-size: 1.8rem;
        font-weight: bold;
      }

      .logo i {
        background: white;
        color: var(--primary);
        width: 50px;
        height: 50px;
        border-radius: 50%;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      nav ul {
        display: flex;
        list-style: none;
        gap: 20px;
      }

      nav a {
        color: white;
        text-decoration: none;
        font-weight: 500;
        padding: 8px 15px;
        border-radius: 20px;
        transition: background 0.3s;
      }

      nav a:hover,
      nav a.active {
        background: rgba(255, 255, 255, 0.2);
      }

      .tab-content {
        display: none;
        animation: fadeIn 0.5s;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      .tab-content.active {
        display: block;
      }

      .card {
        background: rgba(255, 255, 255, 0.95);
        border-radius: 20px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
        padding: 30px;
        margin-bottom: 30px;
      }

      h1 {
        color: var(--dark);
        margin-bottom: 20px;
        font-size: 2.5rem;
      }

      h2 {
        color: var(--dark);
        margin-bottom: 15px;
        font-size: 2rem;
      }

      h3 {
        color: var(--dark);
        margin-bottom: 15px;
        font-size: 1.5rem;
      }

      p {
        margin-bottom: 15px;
        line-height: 1.6;
      }

      /* URL Checker Styles */
      .input-group {
        display: flex;
        gap: 15px;
        margin-bottom: 20px;
      }

      input[type="text"] {
        flex: 1;
        padding: 15px;
        border: 2px solid #ddd;
        border-radius: 10px;
        font-size: 1.1rem;
        transition: border-color 0.3s;
      }

      input[type="text"]:focus {
        outline: none;
        border-color: var(--primary);
      }

      button {
        padding: 15px 30px;
        border: none;
        border-radius: 10px;
        font-size: 1.1rem;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s;
      }

      .btn-primary {
        background: var(--primary);
        color: white;
      }

      .btn-primary:hover {
        background: #5a7ce2;
        transform: translateY(-3px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      }

      .btn-secondary {
        background: var(--secondary);
        color: white;
      }

      .btn-secondary:hover {
        background: #9566d8;
        transform: translateY(-3px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      }

      .result-box {
        padding: 20px;
        border-radius: 10px;
        margin-bottom: 20px;
        display: flex;
        align-items: center;
        gap: 15px;
      }

      .valid {
        background: rgba(46, 204, 113, 0.2);
        border: 2px solid var(--success);
      }

      .invalid {
        background: rgba(231, 76, 60, 0.2);
        border: 2px solid var(--danger);
      }

      .suspicious {
        background: rgba(243, 156, 18, 0.2);
        border: 2px solid var(--warning);
      }

      .result-icon {
        font-size: 2.5rem;
      }

      .result-text h4 {
        font-size: 1.5rem;
        margin-bottom: 5px;
      }

      .features {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin-top: 30px;
      }

      .feature {
        text-align: center;
        padding: 20px;
        background: rgba(236, 240, 241, 0.5);
        border-radius: 10px;
        transition: transform 0.3s;
      }

      .feature:hover {
        transform: translateY(-5px);
      }

      .feature-icon {
        width: 60px;
        height: 60px;
        background: var(--primary);
        color: white;
        border-radius: 50%;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 1.5rem;
        margin: 0 auto 15px;
      }

      /* Game Styles */
      .game-info {
        display: flex;
        justify-content: space-between;
        margin-bottom: 20px;
        padding: 15px;
        background: #f8f9fa;
        border-radius: 10px;
      }

      .score,
      .level,
      .stage {
        font-size: 1.2rem;
        font-weight: bold;
        color: var(--primary);
      }

      .url-container {
        display: grid;
        grid-template-columns: 1fr;
        gap: 15px;
        margin-bottom: 20px;
      }

      .url-option {
        background: white;
        border: 2px solid #ddd;
        border-radius: 10px;
        padding: 15px;
        font-size: 1.1rem;
        cursor: pointer;
        transition: all 0.3s;
        text-align: left;
        word-break: break-all;
      }

      .url-option:hover {
        transform: translateY(-3px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        border-color: var(--secondary);
      }

      .controls {
        display: flex;
        justify-content: center;
        gap: 15px;
        margin-bottom: 20px;
      }

      .difficulty-btns {
        display: flex;
        justify-content: center;
        gap: 10px;
        margin-bottom: 20px;
      }

      .difficulty-btn {
        padding: 10px 20px;
        background: #ddd;
        color: #333;
      }

      .difficulty-btn.active {
        background: var(--secondary);
        color: white;
      }

      .result {
        font-size: 1.5rem;
        font-weight: bold;
        margin: 20px 0;
        min-height: 40px;
        text-align: center;
      }

      .correct {
        color: var(--success);
      }

      .incorrect {
        color: var(--danger);
      }

      .timer {
        font-size: 1.2rem;
        margin-bottom: 15px;
        color: var(--danger);
        font-weight: bold;
        text-align: center;
      }

      .instructions {
        background: #f9f9f9;
        padding: 20px;
        border-radius: 10px;
        margin-bottom: 20px;
      }

      .instructions ul {
        padding-left: 20px;
        margin-bottom: 15px;
      }

      .instructions li {
        margin-bottom: 8px;
      }

      .progress-bar {
        height: 10px;
        background: #eee;
        border-radius: 5px;
        margin-bottom: 20px;
        overflow: hidden;
      }

      .progress {
        height: 100%;
        background: linear-gradient(90deg, var(--primary), var(--secondary));
        width: 0%;
        transition: width 0.3s;
      }

      /* Profile & Progress Styles */
      .profile-container {
        display: grid;
        grid-template-columns: 1fr 2fr;
        gap: 20px;
      }

      .profile-card {
        text-align: center;
        padding: 20px;
      }

      .avatar {
        width: 120px;
        height: 120px;
        border-radius: 50%;
        background: var(--primary);
        margin: 0 auto 15px;
        display: flex;
        justify-content: center;
        align-items: center;
        color: white;
        font-size: 3rem;
      }

      .stats {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 15px;
        margin-top: 20px;
        margin-bottom: 20px;
      }

      .stat {
        background: rgba(236, 240, 241, 0.5);
        padding: 15px;
        border-radius: 10px;
        text-align: center;
      }

      .stat-value {
        font-size: 1.8rem;
        font-weight: bold;
        color: var(--primary);
      }

      .stat-label {
        font-size: 0.9rem;
        color: #7f8c8d;
      }

      .badges {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        margin-top: 20px;
      }

      .badge {
        width: 60px;
        height: 60px;
        border-radius: 50%;
        background: var(--info);
        display: flex;
        justify-content: center;
        align-items: center;
        color: white;
        font-size: 1.5rem;
        position: relative;
      }

      .badge.locked {
        background: #bdc3c7;
        color: #7f8c8d;
      }

      .badge-tooltip {
        position: absolute;
        bottom: 100%;
        left: 50%;
        transform: translateX(-50%);
        background: var(--dark);
        color: white;
        padding: 5px 10px;
        border-radius: 5px;
        font-size: 0.8rem;
        white-space: nowrap;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.3s;
      }

      .badge:hover .badge-tooltip {
        opacity: 1;
      }

      /* Learning Center Styles */
      .learning-modules {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
      }

      .module {
        background: #f8f9fa;
        border-radius: 10px;
        padding: 20px;
        transition: transform 0.3s;
        cursor: pointer;
      }

      .module:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        background: white;
      }

      .module-icon {
        font-size: 2rem;
        color: var(--primary);
        margin-bottom: 15px;
      }

      .module-completion {
        height: 5px;
        background: #e0e0e0;
        border-radius: 5px;
        margin-top: 15px;
        overflow: hidden;
      }

      .module-progress {
        height: 100%;
        background: var(--success);
        width: 0%;
      }

      /* Responsive Design */
      @media (max-width: 768px) {
        header {
          flex-direction: column;
          text-align: center;
          gap: 15px;
        }

        nav ul {
          justify-content: center;
        }

        .input-group {
          flex-direction: column;
        }

        h1 {
          font-size: 2rem;
        }

        h2 {
          font-size: 1.8rem;
        }

        .profile-container {
          grid-template-columns: 1fr;
        }
      }

      @media (max-width: 500px) {
        .logo {
          font-size: 1.5rem;
        }

        nav ul {
          flex-wrap: wrap;
          justify-content: center;
        }

        .card {
          padding: 20px;
        }

        .url-option {
          padding: 12px;
          font-size: 1rem;
        }

        button {
          padding: 12px 25px;
        }
      }

      /* Animations */
      @keyframes pulse {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
        }
        100% {
          transform: scale(1);
        }
      }

      .pulse {
        animation: pulse 2s infinite;
      }

      /* Notification */
      .notification {
        position: fixed;
        top: 20px;
        right: 20px;
        padding: 15px 20px;
        border-radius: 10px;
        color: white;
        font-weight: bold;
        z-index: 1000;
        opacity: 0;
        transform: translateX(100%);
        transition: all 0.3s;
      }

      .notification.show {
        opacity: 1;
        transform: translateX(0);
      }

      .notification.success {
        background: var(--success);
      }

      .notification.error {
        background: var(--danger);
      }

      .notification.info {
        background: var(--info);
      }

      .hidden {
        display: none !important;
      }

      .text-center {
        text-align: center;
      }

      .learning-content {
        line-height: 1.6;
      }

      .learning-content h3 {
        color: var(--primary);
        margin-top: 20px;
      }

      .learning-content ul {
        margin-left: 20px;
        margin-bottom: 15px;
      }

      .learning-content li {
        margin-bottom: 8px;
      }

      .url-details {
        margin-top: 15px;
        padding-top: 15px;
        border-top: 1px solid #ddd;
      }

      .url-details p {
        margin-bottom: 8px;
      }

      .security-tip {
        background: #f8f9fa;
        padding: 15px;
        border-radius: 10px;
        margin-top: 20px;
        border-left: 4px solid var(--info);
      }

      .security-tip h4 {
        color: var(--info);
        margin-bottom: 10px;
      }

      .homograph-example {
        display: flex;
        justify-content: space-between;
        margin: 10px 0;
        padding: 10px;
        background: #fff;
        border-radius: 8px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      }

      .homograph-example .legitimate {
        color: var(--success);
        font-weight: bold;
      }

      .homograph-example .phishing {
        color: var(--danger);
        font-weight: bold;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <header>
        <div class="logo">
          <i class="fas fa-shield-alt"></i>
          <span>URL Guardian</span>
        </div>
        <nav>
          <ul>
            <li>
              <a href="#" class="active nav-link" data-tab="checker"
                >URL Checker</a
              >
            </li>
            <li>
              <a href="#" class="nav-link" data-tab="game">Phishing Game</a>
            </li>
            <li><a href="#" class="nav-link" data-tab="learn">Learn</a></li>
            <li><a href="#" class="nav-link" data-tab="profile">Profile</a></li>
          </ul>
        </nav>
      </header>

      <main>
        <!-- URL Checker Tab -->
        <div class="tab-content active" id="checker">
          <div class="card">
            <h2>Advanced URL Validation Tool</h2>
            <p>Check if URLs are valid, secure, and not suspicious</p>

            <div class="input-group">
              <input
                type="text"
                id="url-input"
                placeholder="Enter URL to validate (e.g., https://example.com)"
              />
              <button class="btn-primary" id="validate-btn">
                <i class="fas fa-search"></i> Analyze URL
              </button>
            </div>

            <div id="validation-result" class="hidden">
              <!-- Result will be shown here -->
            </div>

            <div class="security-tip">
              <h4><i class="fas fa-lightbulb"></i> Security Tip</h4>
              <p>
                Watch out for homograph attacks where letters are replaced with
                similar-looking characters (e.g., 'o' â†’ '0', 'l' â†’ '1', 'm' â†’
                'rn')
              </p>
              <div class="homograph-example">
                <div class="legitimate">https://www.paypal.com</div>
                <div>â†’</div>
                <div class="phishing">https://www.paypa1.com</div>
              </div>
            </div>

            <div class="features">
              <div class="feature">
                <div class="feature-icon">
                  <i class="fas fa-lock"></i>
                </div>
                <h3>Security Scan</h3>
                <p>
                  Detects suspicious patterns and potential phishing attempts,
                  including homograph attacks
                </p>
              </div>
              <div class="feature">
                <div class="feature-icon">
                  <i class="fas fa-brain"></i>
                </div>
                <h3>AI Analysis</h3>
                <p>Uses advanced algorithms to identify emerging threats</p>
              </div>
              <div class="feature">
                <div class="feature-icon">
                  <i class="fas fa-history"></i>
                </div>
                <h3>History Tracking</h3>
                <p>Maintains a record of your scanned URLs for reference</p>
              </div>
            </div>
          </div>

          <div class="card">
            <h2>Recent Scans</h2>
            <div id="scan-history">
              <p class="text-center">
                No scan history yet. URLs you scan will appear here.
              </p>
            </div>
          </div>
        </div>

        <!-- Game Tab -->
        <div class="tab-content" id="game">
          <div class="card">
            <h2>Phishing Detection Game</h2>

            <div class="instructions">
              <h3>How to Play:</h3>
              <ul>
                <li>Select the difficulty level (Easy, Medium, Hard)</li>
                <li>Click START to begin the game</li>
                <li>
                  You'll see multiple URLs - identify the phishing attempt
                </li>
                <li>Click on the suspicious URL as quickly as possible</li>
                <li>Score is based on speed and accuracy</li>
                <li>Complete all 5 stages in each difficulty level</li>
              </ul>
            </div>

            <div class="difficulty-btns">
              <button class="difficulty-btn active" data-difficulty="easy">
                Easy
              </button>
              <button class="difficulty-btn" data-difficulty="medium">
                Medium
              </button>
              <button class="difficulty-btn" data-difficulty="hard">
                Hard
              </button>
            </div>

            <div class="controls">
              <button id="start-btn" class="btn-primary">START GAME</button>
            </div>

            <div id="game-area" class="hidden">
              <div class="game-info">
                <div class="score">Score: <span id="score">0</span></div>
                <div class="level">Level: <span id="level">Easy</span></div>
                <div class="stage">Stage: <span id="stage">1/5</span></div>
              </div>

              <div class="progress-bar">
                <div class="progress" id="progress"></div>
              </div>

              <div class="timer">Time: <span id="timer">0</span>s</div>

              <div class="url-container" id="url-container">
                <!-- URL options will be generated here -->
              </div>

              <div class="result" id="result"></div>

              <div class="controls">
                <button id="next-btn" class="hidden">Next Stage</button>
                <button id="restart-btn">Restart</button>
              </div>
            </div>
          </div>

          <div class="card">
            <h2>Leaderboard</h2>
            <div id="leaderboard">
              <table style="width: 100%; border-collapse: collapse">
                <thead>
                  <tr style="border-bottom: 2px solid #ddd">
                    <th style="text-align: left; padding: 10px">Player</th>
                    <th style="text-align: center; padding: 10px">Level</th>
                    <th style="text-align: right; padding: 10px">Score</th>
                  </tr>
                </thead>
                <tbody id="leaderboard-body">
                  <tr>
                    <td colspan="3" style="text-align: center; padding: 20px">
                      No scores yet. Be the first!
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <!-- Learning Center Tab -->
        <div class="tab-content" id="learn">
          <div class="card">
            <h2>Cybersecurity Learning Center</h2>
            <p>Learn to identify and protect yourself from online threats</p>

            <div class="learning-modules">
              <div class="module" data-module="phishing">
                <div class="module-icon">
                  <i class="fas fa-fish"></i>
                </div>
                <h3>Phishing Awareness</h3>
                <p>
                  Learn how to identify phishing attempts and suspicious URLs
                </p>
                <div class="module-completion">
                  <div class="module-progress" style="width: 25%"></div>
                </div>
              </div>

              <div class="module" data-module="social">
                <div class="module-icon">
                  <i class="fas fa-mask"></i>
                </div>
                <h3>Social Engineering</h3>
                <p>
                  Understand how attackers manipulate people into revealing
                  sensitive information
                </p>
                <div class="module-completion">
                  <div class="module-progress" style="width: 10%"></div>
                </div>
              </div>

              <div class="module" data-module="browsing">
                <div class="module-icon">
                  <i class="fas fa-lock"></i>
                </div>
                <h3>Secure Browsing</h3>
                <p>
                  Best practices for staying safe while browsing the internet
                </p>
                <div class="module-completion">
                  <div class="module-progress" style="width: 5%"></div>
                </div>
              </div>
            </div>
          </div>

          <div class="card">
            <h2>Daily Challenge</h2>
            <div id="daily-challenge">
              <p>Identify the phishing URL in the set below:</p>
              <div class="url-container">
                <div class="url-option">https://secure-paypal.com/login</div>
                <div class="url-option">https://www.paypal.com/signin</div>
                <div class="url-option">https://account.paypal.com</div>
              </div>
              <div class="controls" style="margin-top: 20px">
                <button class="btn-secondary" id="daily-challenge-btn">
                  Submit Answer
                </button>
              </div>
            </div>
          </div>

          <!-- Module Content Area (hidden by default) -->
          <div id="module-content" class="card hidden">
            <button
              id="back-to-modules"
              class="btn-secondary"
              style="margin-bottom: 20px"
            >
              <i class="fas fa-arrow-left"></i> Back to Modules
            </button>
            <div id="module-details">
              <!-- Module content will be loaded here -->
            </div>
          </div>
        </div>

        <!-- Profile Tab -->
        <div class="tab-content" id="profile">
          <div class="profile-container">
            <div class="card profile-card">
              <div class="avatar">
                <i class="fas fa-user"></i>
              </div>
              <h3>Cyber Defender</h3>
              <p>Level 5 Security Analyst</p>

              <div class="stats">
                <div class="stat">
                  <div class="stat-value">12</div>
                  <div class="stat-label">Days Streak</div>
                </div>
                <div class="stat">
                  <div class="stat-value">85%</div>
                  <div class="stat-label">Accuracy</div>
                </div>
              </div>

              <h4 style="margin-top: 20px">Badges</h4>
              <div class="badges">
                <div class="badge">
                  <i class="fas fa-medal"></i>
                  <div class="badge-tooltip">First Scan</div>
                </div>
                <div class="badge">
                  <i class="fas fa-shield-alt"></i>
                  <div class="badge-tooltip">Phishing Expert</div>
                </div>
                <div class="badge locked">
                  <i class="fas fa-fire"></i>
                  <div class="badge-tooltip">7-Day Streak</div>
                </div>
                <div class="badge locked">
                  <i class="fas fa-crown"></i>
                  <div class="badge-tooltip">Master Analyst</div>
                </div>
              </div>
            </div>

            <div class="card">
              <h2>Progress Overview</h2>

              <div class="stats" style="grid-template-columns: repeat(3, 1fr)">
                <div class="stat">
                  <div class="stat-value">47</div>
                  <div class="stat-label">URLs Scanned</div>
                </div>
                <div class="stat">
                  <div class="stat-value">36</div>
                  <div class="stat-label">Games Played</div>
                </div>
                <div class="stat">
                  <div class="stat-value">92%</div>
                  <div class="stat-label">Success Rate</div>
                </div>
              </div>

              <h3 style="margin-top: 20px">Weekly Activity</h3>
              <div
                style="
                  display: flex;
                  height: 150px;
                  align-items: flex-end;
                  gap: 10px;
                  margin-top: 15px;
                "
              >
                <div
                  style="
                    flex: 1;
                    background: #e0e0e0;
                    border-radius: 5px;
                    height: 30%;
                    position: relative;
                  "
                >
                  <div
                    style="
                      position: absolute;
                      bottom: 0;
                      left: 0;
                      right: 0;
                      background: var(--primary);
                      border-radius: 5px;
                      height: 30%;
                    "
                  ></div>
                  <div
                    style="
                      position: absolute;
                      bottom: 0;
                      width: 100%;
                      text-align: center;
                      padding: 5px 0;
                      font-size: 0.8rem;
                    "
                  >
                    Mon
                  </div>
                </div>
                <div
                  style="
                    flex: 1;
                    background: #e0e0e0;
                    border-radius: 5px;
                    height: 30%;
                    position: relative;
                  "
                >
                  <div
                    style="
                      position: absolute;
                      bottom: 0;
                      left: 0;
                      right: 0;
                      background: var(--primary);
                      border-radius: 5px;
                      height: 60%;
                    "
                  ></div>
                  <div
                    style="
                      position: absolute;
                      bottom: 0;
                      width: 100%;
                      text-align: center;
                      padding: 5px 0;
                      font-size: 0.8rem;
                    "
                  >
                    Tue
                  </div>
                </div>
                <div
                  style="
                    flex: 1;
                    background: #e0e0e0;
                    border-radius: 5px;
                    height: 30%;
                    position: relative;
                  "
                >
                  <div
                    style="
                      position: absolute;
                      bottom: 0;
                      left: 0;
                      right: 0;
                      background: var(--primary);
                      border-radius: 5px;
                      height: 45%;
                    "
                  ></div>
                  <div
                    style="
                      position: absolute;
                      bottom: 0;
                      width: 100%;
                      text-align: center;
                      padding: 5px 0;
                      font-size: 0.8rem;
                    "
                  >
                    Wed
                  </div>
                </div>
                <div
                  style="
                    flex: 1;
                    background: #e0e0e0;
                    border-radius: 5px;
                    height: 30%;
                    position: relative;
                  "
                >
                  <div
                    style="
                      position: absolute;
                      bottom: 0;
                      left: 0;
                      right: 0;
                      background: var(--primary);
                      border-radius: 5px;
                      height: 80%;
                    "
                  ></div>
                  <div
                    style="
                      position: absolute;
                      bottom: 0;
                      width: 100%;
                      text-align: center;
                      padding: 5px 0;
                      font-size: 0.8rem;
                    "
                  >
                    Thu
                  </div>
                </div>
                <div
                  style="
                    flex: 1;
                    background: #e0e0e0;
                    border-radius: 5px;
                    height: 30%;
                    position: relative;
                  "
                >
                  <div
                    style="
                      position: absolute;
                      bottom: 0;
                      left: 0;
                      right: 0;
                      background: var(--primary);
                      border-radius: 5px;
                      height: 95%;
                    "
                  ></div>
                  <div
                    style="
                      position: absolute;
                      bottom: 0;
                      width: 100%;
                      text-align: center;
                      padding: 5px 0;
                      font-size: 0.8rem;
                    "
                  >
                    Fri
                  </div>
                </div>
                <div
                  style="
                    flex: 1;
                    background: #e0e0e0;
                    border-radius: 5px;
                    height: 30%;
                    position: relative;
                  "
                >
                  <div
                    style="
                      position: absolute;
                      bottom: 0;
                      left: 0;
                      right: 0;
                      background: var(--primary);
                      border-radius: 5px;
                      height: 65%;
                    "
                  ></div>
                  <div
                    style="
                      position: absolute;
                      bottom: 0;
                      width: 100%;
                      text-align: center;
                      padding: 5px 0;
                      font-size: 0.8rem;
                    "
                  >
                    Sat
                  </div>
                </div>
                <div
                  style="
                    flex: 1;
                    background: #e0e0e0;
                    border-radius: 5px;
                    height: 30%;
                    position: relative;
                  "
                >
                  <div
                    style="
                      position: absolute;
                      bottom: 0;
                      left: 0;
                      right: 0;
                      background: var(--primary);
                      border-radius: 5px;
                      height: 40%;
                    "
                  ></div>
                  <div
                    style="
                      position: absolute;
                      bottom: 0;
                      width: 100%;
                      text-align: center;
                      padding: 5px 0;
                      font-size: 0.8rem;
                    "
                  >
                    Sun
                  </div>
                </div>
              </div>

              <h3 style="margin-top: 20px">Achievements</h3>
              <div
                style="background: #f8f9fa; padding: 15px; border-radius: 10px"
              >
                <div
                  style="
                    display: flex;
                    align-items: center;
                    margin-bottom: 10px;
                  "
                >
                  <div
                    style="
                      width: 40px;
                      height: 40px;
                      background: var(--success);
                      border-radius: 50%;
                      display: flex;
                      justify-content: center;
                      align-items: center;
                      color: white;
                      margin-right: 15px;
                    "
                  >
                    <i class="fas fa-check"></i>
                  </div>
                  <div>
                    <h4 style="margin: 0">First Blood</h4>
                    <p style="margin: 0; font-size: 0.9rem">
                      Complete your first phishing detection game
                    </p>
                  </div>
                </div>
                <div
                  style="
                    display: flex;
                    align-items: center;
                    margin-bottom: 10px;
                  "
                >
                  <div
                    style="
                      width: 40px;
                      height: 40px;
                      background: var(--success);
                      border-radius: 50%;
                      display: flex;
                      justify-content: center;
                      align-items: center;
                      color: white;
                      margin-right: 15px;
                    "
                  >
                    <i class="fas fa-check"></i>
                  </div>
                  <div>
                    <h4 style="margin: 0">Quick Draw</h4>
                    <p style="margin: 0; font-size: 0.9rem">
                      Identify a phishing URL in under 3 seconds
                    </p>
                  </div>
                </div>
                <div style="display: flex; align-items: center">
                  <div
                    style="
                      width: 40px;
                      height: 40px;
                      background: #bdc3c7;
                      border-radius: 50%;
                      display: flex;
                      justify-content: center;
                      align-items: center;
                      color: #7f8c8d;
                      margin-right: 15px;
                    "
                  >
                    <i class="fas fa-lock"></i>
                  </div>
                  <div>
                    <h4 style="margin: 0">Perfect Week</h4>
                    <p style="margin: 0; font-size: 0.9rem">
                      Play for 7 consecutive days
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>

    <div class="notification" id="notification">Notification message</div>

    <script>
      // List of popular legitimate domains to compare against
      const popularDomains = [
        "google.com",
        "youtube.com",
        "facebook.com",
        "amazon.com",
        "yahoo.com",
        "wikipedia.org",
        "twitter.com",
        "instagram.com",
        "linkedin.com",
        "netflix.com",
        "microsoft.com",
        "apple.com",
        "paypal.com",
        "ebay.com",
        "github.com",
        "reddit.com",
        "stackoverflow.com",
        "adobe.com",
        "whatsapp.com",
        "pinterest.com",
        "wordpress.com",
        "blogspot.com",
        "tumblr.com",
        "quora.com",
        "imdb.com",
        "bbc.com",
        "cnn.com",
        "nytimes.com",
        "walmart.com",
        "target.com",
        "bankofamerica.com",
        "wellsfargo.com",
        "chase.com",
        "capitalone.com",
      ];

      // Homograph character mapping for detection
      const homographMap = {
        0: "o",
        1: "l",
        2: "z",
        5: "s",
        "â‚¬": "c",
        "Â£": "e",
        "Â¢": "c",
        "Â¥": "y",
        "Â®": "r",
        "Â©": "c",
        "âˆ†": "a",
        "âˆž": "o",
        "|": "l",
        "\\": "v",
        "/": "v",
        "Â§": "s",
        "Â¶": "p",
      };

      // Enhanced URL Validation Functionality
      function validateURL(url) {
        try {
          // Basic validation
          if (!url) {
            return {
              isValid: false,
              message: "Please enter a URL",
              details: ["No URL provided"],
            };
          }

          // Check if the URL has a protocol
          if (!url.startsWith("http://") && !url.startsWith("https://")) {
            return {
              isValid: false,
              message: "Invalid URL - Missing protocol",
              details: ["URL should start with http:// or https://"],
            };
          }

          // Try to create a URL object (this will throw for invalid URLs)
          const urlObj = new URL(url);

          // Check for valid domain
          const domainParts = urlObj.hostname.split(".");
          if (domainParts.length < 2 || domainParts.some((part) => !part)) {
            return {
              isValid: false,
              message: "Invalid domain name",
              details: ["The domain name appears to be malformed"],
            };
          }

          // Check for homograph attacks
          const homographResults = checkHomographAttack(urlObj.hostname);

          // Check for suspicious patterns (phishing detection)
          const suspiciousPatterns = [
            {
              pattern:
                /https?:\/\/(?!www\.)(.*\.)?(paypal|ebay|amazon|bankofamerica|wellsfargo|chase)\./,
              message: "Suspicious domain mimicking known brand",
            },
            {
              pattern: /@/,
              message:
                "URL contains '@' character - often used in phishing attempts",
            },
            {
              pattern: /\.(tk|ml|ga|cf|gq)$/,
              message:
                "URL uses free domain extension often associated with malicious sites",
            },
            {
              pattern: /https?:\/\/[^\/]+\/login\.php/,
              message: "Generic login page - could be phishing",
            },
            {
              pattern: /https?:\/\/[^\/]+\/[a-f0-9]{16,}/,
              message:
                "Long hexadecimal strings in path - could be obfuscation",
            },
          ];

          const detectedPatterns = [];
          for (const { pattern, message } of suspiciousPatterns) {
            if (pattern.test(url)) {
              detectedPatterns.push(message);
            }
          }

          // If homograph attack detected
          if (homographResults.isHomograph) {
            detectedPatterns.push(
              `Homograph attack detected: ${homographResults.details}`
            );
          }

          // If suspicious patterns detected
          if (detectedPatterns.length > 0) {
            return {
              isValid: false,
              message: "Potential phishing URL detected",
              details: detectedPatterns,
              isSuspicious: true,
              homograph: homographResults.isHomograph,
            };
          }

          // If all checks pass
          return {
            isValid: true,
            message: "This URL appears to be valid and safe",
            parsedURL: {
              protocol: urlObj.protocol,
              host: urlObj.host,
              hostname: urlObj.hostname,
              pathname: urlObj.pathname,
              search: urlObj.search,
              hash: urlObj.hash,
            },
          };
        } catch (error) {
          return {
            isValid: false,
            message: "Invalid URL format",
            details: [error.toString()],
          };
        }
      }

      // Check for homograph attacks
      function checkHomographAttack(hostname) {
        let result = {
          isHomograph: false,
          details: "",
        };

        // Remove www. if present for comparison
        const cleanHostname = hostname.replace(/^www\./, "");

        // Check against popular domains
        for (const domain of popularDomains) {
          // Direct comparison first
          if (cleanHostname === domain) {
            continue; // It's a legitimate domain
          }

          // Check for homograph similarity
          const similarityScore = calculateSimilarity(cleanHostname, domain);

          if (similarityScore > 0.85) {
            // High similarity threshold
            result.isHomograph = true;
            result.details = `Domain "${cleanHostname}" closely resembles legitimate domain "${domain}"`;
            break;
          }

          // Check for character substitutions
          const substituted = substituteHomographs(cleanHostname);
          if (substituted === domain) {
            result.isHomograph = true;
            result.details = `Domain "${cleanHostname}" uses character substitutions to mimic "${domain}"`;
            break;
          }
        }

        return result;
      }

      // Calculate similarity between two strings
      function calculateSimilarity(str1, str2) {
        const longer = str1.length > str2.length ? str1 : str2;
        const shorter = str1.length > str2.length ? str2 : str1;

        if (longer.length === 0) return 1.0;

        return (
          (longer.length - editDistance(longer, shorter)) /
          parseFloat(longer.length)
        );
      }

      // Calculate edit distance between two strings
      function editDistance(s1, s2) {
        s1 = s1.toLowerCase();
        s2 = s2.toLowerCase();

        const costs = [];
        for (let i = 0; i <= s1.length; i++) {
          let lastValue = i;
          for (let j = 0; j <= s2.length; j++) {
            if (i === 0) {
              costs[j] = j;
            } else if (j > 0) {
              let newValue = costs[j - 1];
              if (s1.charAt(i - 1) !== s2.charAt(j - 1)) {
                newValue =
                  Math.min(Math.min(newValue, lastValue), costs[j]) + 1;
              }
              costs[j - 1] = lastValue;
              lastValue = newValue;
            }
          }
          if (i > 0) costs[s2.length] = lastValue;
        }
        return costs[s2.length];
      }

      // Substitute homograph characters with their legitimate counterparts
      function substituteHomographs(str) {
        let result = "";
        for (let i = 0; i < str.length; i++) {
          const char = str[i];
          result += homographMap[char] || char;
        }
        return result;
      }

      // Game data
      const gameData = {
        easy: [
          {
            valid: [
              "https://www.google.com",
              "https://www.github.com",
              "https://stackoverflow.com",
            ],
            invalid: "https://www.g00gle.com",
            explanation:
              "The invalid URL uses '0' instead of 'o' in 'google' - a common homograph attack",
          },
          {
            valid: [
              "https://www.wikipedia.org",
              "https://www.reddit.com",
              "https://www.linkedin.com",
            ],
            invalid: "https://www.paypa1.com",
            explanation:
              "The invalid URL uses '1' instead of 'l' in 'paypal' - a common homograph attack",
          },
          {
            valid: [
              "https://www.amazon.com",
              "https://www.netflix.com",
              "https://www.ebay.com",
            ],
            invalid: "https://www.amaz0n.com",
            explanation:
              "The invalid URL uses '0' instead of 'o' in 'amazon' - a common homograph attack",
          },
          {
            valid: [
              "https://www.twitter.com",
              "https://www.instagram.com",
              "https://www.pinterest.com",
            ],
            invalid: "https://www.faceb00k.com",
            explanation:
              "The invalid URL uses '00' instead of 'oo' in 'facebook' - a common homograph attack",
          },
          {
            valid: [
              "https://www.microsoft.com",
              "https://www.apple.com",
              "https://www.adobe.com",
            ],
            invalid: "https://www.micr0soft.com",
            explanation:
              "The invalid URL uses '0' instead of 'o' in 'microsoft' - a common homograph attack",
          },
        ],
        medium: [
          {
            valid: [
              "https://sub.domain.com/path",
              "https://example.com:8080/page",
              "https://user:pass@example.com",
            ],
            invalid: "https://www.bankofamerica.secure-login.com",
            explanation:
              "The invalid URL uses a subdomain to mimic Bank of America's legitimate domain",
          },
          {
            valid: [
              "https://example.com/?query=value",
              "https://example.com/#fragment",
              "https://example.com/path/to/page",
            ],
            invalid: "https://example.com/../invalid",
            explanation:
              "The invalid URL uses '..' to traverse directories which can be suspicious",
          },
          {
            valid: [
              "https://example.com",
              "http://example.com",
              "ftp://example.com",
            ],
            invalid: "https://example.com:65536",
            explanation:
              "The invalid URL uses port 65536 which is outside the valid port range (0-65535)",
          },
          {
            valid: [
              "https://example.com",
              "https://192.168.1.1",
              "https://localhost:3000",
            ],
            invalid: "https://256.256.256.256",
            explanation:
              "The invalid URL uses an IP address with octets outside the valid range (0-255)",
          },
          {
            valid: [
              "https://example.com",
              "https://www.example.co.uk",
              "https://sub.sub.example.com",
            ],
            invalid: "https://example.-com.com",
            explanation:
              "The invalid URL contains a hyphen at the beginning of a domain part",
          },
        ],
        hard: [
          {
            valid: [
              "https://example.com/æµ‹è¯•",
              "https://example.com/ðŸ¦„",
              "https://Ð¿Ñ€Ð¸Ð¼ÐµÑ€.Ñ‚ÐµÑÑ‚",
            ],
            invalid: "https://example.com/\\x00",
            explanation:
              "The invalid URL contains a null character which can be used in injection attacks",
          },
          {
            valid: [
              "https://example.com",
              "https://xn--example-8g0a.com",
              "https://example.com/?a=1&b=2",
            ],
            invalid: "https://example.com/?a=script>alert('xss')</script",
            explanation: "The invalid URL contains potential XSS attack code",
          },
          {
            valid: [
              "https://example.com",
              "https://1.2.3.4",
              "https://[2001:db8::1]",
            ],
            invalid: "https://[2001:db8:::1]",
            explanation:
              "The invalid URL contains an invalid IPv6 address with consecutive colons",
          },
          {
            valid: [
              "https://example.com",
              "https://example.com:65535",
              "https://example.com:0",
            ],
            invalid: "https://example.com:99999",
            explanation:
              "The invalid URL uses a port number outside the valid range",
          },
          {
            valid: [
              "https://example.com",
              "https://example.com/very/long/path/that/is/valid",
              "https://example.com/?very=long&query=string&with=many=parameters",
            ],
            invalid: "https://example.com/" + "a".repeat(10000),
            explanation:
              "The invalid URL is excessively long which can be used in buffer overflow attacks",
          },
        ],
      };

      // Learning module content
      const learningContent = {
        phishing: {
          title: "Phishing Awareness",
          content: `
                    <h2>Understanding Phishing Attacks</h2>
                    <p>Phishing is a cybercrime in which targets are contacted by email, telephone, or text message by someone posing as a legitimate institution to lure individuals into providing sensitive data such as personally identifiable information, banking and credit card details, and passwords.</p>
                    
                    <h3>Common Phishing Techniques</h3>
                    <ul>
                        <li><strong>Email Phishing:</strong> Fraudulent emails that appear to be from legitimate sources</li>
                        <li><strong>Spear Phishing:</strong> Targeted attacks on specific individuals or organizations</li>
                        <li><strong>Whaling:</strong> Attacks targeting high-profile executives</li>
                        <li><strong>Smishing:</strong> Phishing via SMS text messages</li>
                        <li><strong>Vishing:</strong> Phishing via voice calls</li>
                        <li><strong>Homograph Attacks:</strong> Using visually similar characters to create deceptive URLs</li>
                    </ul>
                    
                    <h3>How to Identify Phishing Attempts</h3>
                    <ul>
                        <li>Check for spelling mistakes and poor grammar</li>
                        <li>Look for generic greetings instead of personalized ones</li>
                        <li>Hover over links to see the actual URL before clicking</li>
                        <li>Be wary of urgent or threatening language</li>
                        <li>Check the sender's email address carefully</li>
                        <li>Watch for character substitutions (0 for o, 1 for l, etc.)</li>
                    </ul>
                    
                    <h3>Protecting Yourself</h3>
                    <ul>
                        <li>Never provide personal information via email or text</li>
                        <li>Use two-factor authentication whenever possible</li>
                        <li>Keep your software and browsers updated</li>
                        <li>Use anti-phishing browser extensions</li>
                        <li>Report suspected phishing attempts to your IT department</li>
                    </ul>
                `,
        },
        social: {
          title: "Social Engineering",
          content: `
                    <h2>Understanding Social Engineering</h2>
                    <p>Social engineering is the psychological manipulation of people into performing actions or divulging confidential information. It differs from traditional hacking as it relies on human interaction and often involves tricking people into breaking normal security procedures.</p>
                    
                    <h3>Common Social Engineering Techniques</h3>
                    <ul>
                        <li><strong>Pretexting:</strong> Creating a fabricated scenario to engage a targeted victim</li>
                        <li><strong>Baiting:</strong> Offering something enticing to lure victims</li>
                        <li><strong>Quid Pro Quo:</strong> Offering a benefit in exchange for information</li>
                        <li><strong>Tailgating:</strong> Gaining physical access to restricted areas by following authorized personnel</li>
                        <li><strong>Phishing:</strong> Using fake communications to extract sensitive data</li>
                    </ul>
                    
                    <h3>How to Recognize Social Engineering Attacks</h3>
                    <ul>
                        <li>Requests for sensitive information via email or phone</li>
                        <li>Urgent or threatening language designed to prompt quick action</li>
                        <li>Offers that seem too good to be true</li>
                        <li>Requests to bypass normal security protocols</li>
                        <li>Unsolicited requests for help from "IT support" or "service providers"</li>
                    </ul>
                    
                    <h3>Protection Strategies</h3>
                    <ul>
                        <li>Verify the identity of anyone requesting sensitive information</li>
                        <li>Be cautious of unsolicited requests, even if they appear to be from known contacts</li>
                        <li>Implement multi-factor authentication for all sensitive systems</li>
                        <li>Regularly train employees to recognize social engineering tactics</li>
                        <li>Establish clear protocols for handling sensitive information requests</li>
                    </ul>
                `,
        },
        browsing: {
          title: "Secure Browsing",
          content: `
                    <h2>Secure Web Browsing Practices</h2>
                    <p>Secure browsing involves taking precautions to protect your personal information and computer from online threats while using the internet. This includes being aware of potential risks and implementing protective measures.</p>
                    
                    <h3>Essential Secure Browsing Practices</h3>
                    <ul>
                        <li><strong>Use HTTPS:</strong> Always look for the padlock icon and "https://" in the address bar</li>
                        <li><strong>Keep Software Updated:</strong> Regularly update your browser and plugins</li>
                        <li><strong>Use Strong Passwords:</strong> Create unique, complex passwords for different sites</li>
                        <li><strong>Enable Two-Factor Authentication:</strong> Add an extra layer of security to your accounts</li>
                        <li><strong>Be Cautious with Downloads:</strong> Only download files from trusted sources</li>
                    </ul>
                    
                    <h3>Browser Security Settings</h3>
                    <ul>
                        <li>Enable phishing and malware protection in your browser settings</li>
                        <li>Clear browsing data regularly, especially cookies and cache</li>
                        <li>Use private browsing mode when accessing sensitive information on shared devices</li>
                        <li>Disable auto-fill for forms and passwords on public computers</li>
                        <li>Review and adjust privacy settings to limit data sharing</li>
                    </ul>
                    
                    <h3>Recognizing Secure Websites</h3>
                    <ul>
                        <li>Look for the padlock icon in the address bar</li>
                        <li>Check that the URL begins with "https://" rather than "http://"</li>
                        <li>Verify the website's security certificate if prompted by your browser</li>
                        <li>Be wary of sites with numerous pop-ups or redirects</li>
                        <li>Check for legitimate contact information and privacy policies</li>
                    </ul>
                    
                    <h3>Additional Security Measures</h3>
                    <ul>
                        <li>Use a reputable antivirus and anti-malware solution</li>
                        <li>Consider using a VPN, especially on public Wi-Fi networks</li>
                        <li>Install browser extensions that block ads and trackers</li>
                        <li>Regularly review browser extensions and remove any you don't use</li>
                        <li>Educate yourself about current online threats and scams</li>
                    </ul>
                `,
        },
      };

      // Application state
      let appState = {
        currentTab: "checker",
        scanHistory: [],
        gameState: {
          difficulty: "easy",
          currentStage: 0,
          score: 0,
          startTime: 0,
          timerInterval: null,
          currentTime: 0,
        },
        userProfile: {
          username: "Cyber Defender",
          level: 5,
          streak: 12,
          accuracy: 85,
          scans: 47,
          games: 36,
          successRate: 92,
          badges: ["first-scan", "phishing-expert"],
        },
      };

      // DOM elements
      const navLinks = document.querySelectorAll(".nav-link");
      const tabContents = document.querySelectorAll(".tab-content");
      const urlInput = document.getElementById("url-input");
      const validateBtn = document.getElementById("validate-btn");
      const validationResult = document.getElementById("validation-result");
      const scanHistoryElement = document.getElementById("scan-history");
      const startScreen = document.getElementById("game-area");
      const startBtn = document.getElementById("start-btn");
      const restartBtn = document.getElementById("restart-btn");
      const nextBtn = document.getElementById("next-btn");
      const scoreElement = document.getElementById("score");
      const levelElement = document.getElementById("level");
      const stageElement = document.getElementById("stage");
      const urlContainer = document.getElementById("url-container");
      const resultElement = document.getElementById("result");
      const timerElement = document.getElementById("timer");
      const progressElement = document.getElementById("progress");
      const difficultyBtns = document.querySelectorAll(".difficulty-btn");
      const notification = document.getElementById("notification");
      const modules = document.querySelectorAll(".module");
      const moduleContent = document.getElementById("module-content");
      const moduleDetails = document.getElementById("module-details");
      const backToModules = document.getElementById("back-to-modules");
      const dailyChallengeBtn = document.getElementById("daily-challenge-btn");

      // Initialize application
      function initApp() {
        // Load data from localStorage
        loadFromLocalStorage();

        // Set up event listeners for navigation
        navLinks.forEach((link) => {
          link.addEventListener("click", (e) => {
            e.preventDefault();
            const tab = link.dataset.tab;

            // Update active nav link
            navLinks.forEach((l) => l.classList.remove("active"));
            link.classList.add("active");

            // Show corresponding tab
            tabContents.forEach((content) =>
              content.classList.remove("active")
            );
            document.getElementById(tab).classList.add("active");

            // Update app state
            appState.currentTab = tab;

            // Save to localStorage
            saveToLocalStorage();
          });
        });

        // Set up URL validation
        validateBtn.addEventListener("click", validateUrl);
        urlInput.addEventListener("keypress", (e) => {
          if (e.key === "Enter") validateUrl();
        });

        // Set up game
        initGame();

        // Set up learning modules
        modules.forEach((module) => {
          module.addEventListener("click", () => {
            const moduleId = module.dataset.module;
            showModule(moduleId);
          });
        });

        backToModules.addEventListener("click", hideModule);

        // Set up daily challenge
        dailyChallengeBtn.addEventListener("click", handleDailyChallenge);

        // Load initial data
        loadScanHistory();
        updateLeaderboard();

        // Show welcome notification
        showNotification(
          "Welcome to URL Guardian! Start by checking a URL or playing the game.",
          "info"
        );
      }

      // Load data from localStorage
      function loadFromLocalStorage() {
        const savedData = localStorage.getItem("urlGuardianData");
        if (savedData) {
          const parsedData = JSON.parse(savedData);
          appState.scanHistory = parsedData.scanHistory || [];
          appState.userProfile = parsedData.userProfile || appState.userProfile;

          // Update UI with loaded data
          updateProfileUI();
        }
      }

      // Save data to localStorage
      function saveToLocalStorage() {
        const dataToSave = {
          scanHistory: appState.scanHistory,
          userProfile: appState.userProfile,
        };
        localStorage.setItem("urlGuardianData", JSON.stringify(dataToSave));
      }

      // Update profile UI with current data
      function updateProfileUI() {
        // This would update various profile elements with data from appState.userProfile
        // Implementation would depend on what specific elements need updating
      }

      // Validate URL function
      function validateUrl() {
        const url = urlInput.value.trim();
        if (!url) return;

        const result = validateURL(url);
        showValidationResult(result);

        // Add to history
        addToScanHistory(url, result);

        // Update UI
        loadScanHistory();

        // Show notification
        if (result.isValid && !result.isSuspicious) {
          showNotification("URL is valid and safe!", "success");
        } else if (result.isSuspicious) {
          if (result.homograph) {
            showNotification("Warning: Homograph attack detected!", "error");
          } else {
            showNotification(
              "Warning: Potential phishing URL detected!",
              "error"
            );
          }
        } else {
          showNotification("URL is invalid.", "error");
        }

        // Save to localStorage
        saveToLocalStorage();
      }

      // Show validation result
      function showValidationResult(result) {
        validationResult.className = "result-box";

        if (result.isValid && !result.isSuspicious) {
          validationResult.classList.add("valid");
        } else if (result.isSuspicious) {
          validationResult.classList.add("suspicious");
        } else {
          validationResult.classList.add("invalid");
        }

        validationResult.classList.remove("hidden");

        validationResult.innerHTML = `
                <div class="result-icon">
                    <i class="fas ${
                      result.isValid && !result.isSuspicious
                        ? "fa-check-circle"
                        : result.isSuspicious
                        ? "fa-exclamation-triangle"
                        : "fa-times-circle"
                    }"></i>
                </div>
                <div class="result-text">
                    <h4>${
                      result.isValid && !result.isSuspicious
                        ? "Valid URL"
                        : result.isSuspicious
                        ? "Suspicious URL"
                        : "Invalid URL"
                    }</h4>
                    <p>${result.message}</p>
                    ${
                      result.details
                        ? `
                            <ul>
                                ${result.details
                                  .map((detail) => `<li>${detail}</li>`)
                                  .join("")}
                            </ul>
                        `
                        : ""
                    }
                    ${
                      result.parsedURL
                        ? `
                            <div class="url-details">
                                <p><strong>Protocol:</strong> ${
                                  result.parsedURL.protocol
                                }</p>
                                <p><strong>Host:</strong> ${
                                  result.parsedURL.host
                                }</p>
                                <p><strong>Path:</strong> ${
                                  result.parsedURL.pathname || "/"
                                }</p>
                            </div>
                        `
                        : ""
                    }
                </div>
            `;
      }

      // Add URL to scan history
      function addToScanHistory(url, result) {
        appState.scanHistory.unshift({
          url,
          timestamp: new Date(),
          result,
        });

        // Keep only last 10 scans
        if (appState.scanHistory.length > 10) {
          appState.scanHistory.pop();
        }

        // Update user profile
        appState.userProfile.scans++;
      }

      // Load scan history
      function loadScanHistory() {
        // Add some mock scans if history is empty
        if (appState.scanHistory.length === 0) {
          appState.scanHistory = [
            {
              url: "https://www.paypal.com.login.security.verify.com",
              timestamp: new Date(Date.now() - 86400000), // 1 day ago
              result: {
                isValid: false,
                message: "Potential phishing URL detected",
                details: ["Suspicious domain mimicking known brand"],
                isSuspicious: true,
              },
            },
            {
              url: "https://www.github.com",
              timestamp: new Date(Date.now() - 172800000), // 2 days ago
              result: {
                isValid: true,
                message: "This URL appears to be valid and safe",
                parsedURL: {
                  protocol: "https:",
                  host: "www.github.com",
                  hostname: "www.github.com",
                  pathname: "/",
                  search: "",
                  hash: "",
                },
              },
            },
            {
              url: "https://secure-apple-id.verify.com",
              timestamp: new Date(Date.now() - 259200000), // 3 days ago
              result: {
                isValid: false,
                message: "Potential phishing URL detected",
                details: ["Suspicious domain mimicking known brand"],
                isSuspicious: true,
              },
            },
          ];
        }

        scanHistoryElement.innerHTML = "";
        appState.scanHistory.forEach((scan) => {
          const scanElement = document.createElement("div");
          scanElement.className = "result-box";

          if (scan.result.isValid && !scan.result.isSuspicious) {
            scanElement.classList.add("valid");
          } else if (scan.result.isSuspicious) {
            scanElement.classList.add("suspicious");
          } else {
            scanElement.classList.add("invalid");
          }

          scanElement.style.marginBottom = "10px";
          scanElement.style.padding = "10px";

          scanElement.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div style="font-weight: bold; max-width: 70%; overflow: hidden; text-overflow: ellipsis;">${
                          scan.url
                        }</div>
                        <div style="font-size: 0.9rem; color: #7f8c8d;">${formatTime(
                          scan.timestamp
                        )}</div>
                    </div>
                `;

          scanHistoryElement.appendChild(scanElement);
        });
      }

      // Format time for display
      function formatTime(date) {
        return date.toLocaleTimeString([], {
          hour: "2-digit",
          minute: "2-digit",
        });
      }

      // Show notification
      function showNotification(message, type) {
        notification.textContent = message;
        notification.className = `notification ${type}`;
        notification.classList.add("show");

        setTimeout(() => {
          notification.classList.remove("show");
        }, 3000);
      }

      // Update leaderboard
      function updateLeaderboard() {
        const leaderboardBody = document.getElementById("leaderboard-body");
        // For demo purposes, we'll use mock data
        const mockData = [
          { name: "CyberHero", level: "Hard", score: 12500 },
          { name: "URLMaster", level: "Medium", score: 9800 },
          { name: "PhishBuster", level: "Hard", score: 15200 },
          { name: "SecureSam", level: "Easy", score: 7200 },
          { name: "You", level: "Medium", score: 6400 },
        ];

        leaderboardBody.innerHTML = "";
        mockData.forEach((player) => {
          const row = document.createElement("tr");
          row.style.borderBottom = "1px solid #eee";
          row.innerHTML = `
                    <td style="padding: 10px;">${player.name}</td>
                    <td style="text-align: center; padding: 10px;">${
                      player.level
                    }</td>
                    <td style="text-align: right; padding: 10px;">${player.score.toLocaleString()}</td>
                `;
          leaderboardBody.appendChild(row);
        });
      }

      // Initialize game
      function initGame() {
        // Set up event listeners
        startBtn.addEventListener("click", startGame);
        restartBtn.addEventListener("click", restartGame);
        nextBtn.addEventListener("click", nextStage);

        // Set up difficulty buttons
        difficultyBtns.forEach((btn) => {
          btn.addEventListener("click", () => {
            difficultyBtns.forEach((b) => b.classList.remove("active"));
            btn.classList.add("active");
            appState.gameState.difficulty = btn.dataset.difficulty;

            // Save to localStorage
            saveToLocalStorage();
          });
        });
      }

      // Start the game
      function startGame() {
        startBtn.classList.add("hidden");
        document.querySelector(".difficulty-btns").classList.add("hidden");
        startScreen.classList.remove("hidden");

        appState.gameState.currentStage = 0;
        appState.gameState.score = 0;
        updateUI();

        loadStage();
      }

      // Load current stage
      function loadStage() {
        const stageData =
          gameData[appState.gameState.difficulty][
            appState.gameState.currentStage
          ];
        const allUrls = [...stageData.valid, stageData.invalid];

        // Shuffle URLs
        shuffleArray(allUrls);

        // Clear URL container
        urlContainer.innerHTML = "";

        // Create URL options
        allUrls.forEach((url) => {
          const urlElement = document.createElement("div");
          urlElement.classList.add("url-option");
          urlElement.textContent = url;
          urlElement.addEventListener("click", () =>
            checkAnswer(url, urlElement, stageData.explanation)
          );
          urlContainer.appendChild(urlElement);
        });

        // Start timer
        startTimer();

        // Reset result
        resultElement.textContent = "";
        resultElement.className = "result";

        // Hide next button
        nextBtn.classList.add("hidden");
      }

      // Check if answer is correct
      function checkAnswer(url, element, explanation) {
        const stageData =
          gameData[appState.gameState.difficulty][
            appState.gameState.currentStage
          ];
        const isInvalid = url === stageData.invalid;

        // Stop timer
        stopTimer();

        if (isInvalid) {
          // Correct answer
          const timeTaken = appState.gameState.currentTime;
          const points = calculatePoints(timeTaken);
          appState.gameState.score += points;

          element.style.borderColor = "var(--success)";
          element.style.background = "#e8f5e9";
          resultElement.innerHTML = `Correct! +${points} points<br><small>${explanation}</small>`;
          resultElement.className = "result correct";

          // Update user profile
          appState.userProfile.games++;
        } else {
          // Incorrect answer
          element.style.borderColor = "var(--danger)";
          element.style.background = "#ffebee";

          // Highlight the correct answer
          const urlElements = document.querySelectorAll(".url-option");
          urlElements.forEach((el) => {
            if (el.textContent === stageData.invalid) {
              el.style.borderColor = "var(--success)";
              el.style.background = "#e8f5e9";
            }
          });

          resultElement.innerHTML = `Incorrect!<br><small>${explanation}</small>`;
          resultElement.className = "result incorrect";
        }

        // Show next button or finish game
        if (appState.gameState.currentStage < 4) {
          nextBtn.classList.remove("hidden");
        } else {
          nextBtn.textContent = "See Results";
          nextBtn.classList.remove("hidden");
        }

        updateUI();
        updateLeaderboard();

        // Save to localStorage
        saveToLocalStorage();
      }

      // Calculate points based on time taken
      function calculatePoints(timeTaken) {
        const maxPoints = 1000;
        let points = Math.max(maxPoints - timeTaken * 20, 100);

        // Adjust points based on difficulty
        if (appState.gameState.difficulty === "medium") points *= 1.5;
        if (appState.gameState.difficulty === "hard") points *= 2;

        return Math.round(points);
      }

      // Move to next stage
      function nextStage() {
        if (appState.gameState.currentStage < 4) {
          appState.gameState.currentStage++;
          loadStage();
        } else {
          // Game finished
          resultElement.textContent = `Game Over! Final Score: ${appState.gameState.score}`;
          resultElement.className = "result";
          nextBtn.classList.add("hidden");

          // Disable URL options
          const urlElements = document.querySelectorAll(".url-option");
          urlElements.forEach((el) => {
            el.style.pointerEvents = "none";
          });

          // Show notification
          showNotification(
            `Congratulations! You scored ${appState.gameState.score} points.`,
            "success"
          );
        }

        // Save to localStorage
        saveToLocalStorage();
      }

      // Restart game
      function restartGame() {
        stopTimer();
        startScreen.classList.add("hidden");
        document.querySelector(".difficulty-btns").classList.remove("hidden");
        startBtn.classList.remove("hidden");
      }

      // Start timer
      function startTimer() {
        appState.gameState.startTime = Date.now();
        appState.gameState.currentTime = 0;
        timerElement.textContent = "0";

        if (appState.gameState.timerInterval)
          clearInterval(appState.gameState.timerInterval);

        appState.gameState.timerInterval = setInterval(() => {
          appState.gameState.currentTime =
            (Date.now() - appState.gameState.startTime) / 1000;
          timerElement.textContent = appState.gameState.currentTime.toFixed(1);

          // Update progress bar (max 15 seconds per question)
          const progressPercent = Math.min(
            (appState.gameState.currentTime / 15) * 100,
            100
          );
          progressElement.style.width = `${progressPercent}%`;

          // Change color when time is running out
          if (appState.gameState.currentTime > 10) {
            progressElement.style.background = "var(--danger)";
          } else if (appState.gameState.currentTime > 5) {
            progressElement.style.background = "var(--warning)";
          }
        }, 100);
      }

      // Stop timer
      function stopTimer() {
        if (appState.gameState.timerInterval) {
          clearInterval(appState.gameState.timerInterval);
          appState.gameState.timerInterval = null;
        }
      }

      // Update UI elements
      function updateUI() {
        scoreElement.textContent = appState.gameState.score;
        levelElement.textContent =
          appState.gameState.difficulty.charAt(0).toUpperCase() +
          appState.gameState.difficulty.slice(1);
        stageElement.textContent = `${appState.gameState.currentStage + 1}/5`;
      }

      // Utility function to shuffle array
      function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
      }

      // Show learning module
      function showModule(moduleId) {
        const content = learningContent[moduleId];
        if (!content) return;

        // Hide modules and show content
        document.querySelector(".learning-modules").classList.add("hidden");
        document.getElementById("daily-challenge").classList.add("hidden");
        moduleContent.classList.remove("hidden");

        // Set module content
        moduleDetails.innerHTML = `
                <h2>${content.title}</h2>
                <div class="learning-content">
                    ${content.content}
                </div>
            `;

        // Update progress for this module
        const progressElement = document.querySelector(
          `.module[data-module="${moduleId}"] .module-progress`
        );
        if (progressElement) {
          const currentWidth = parseInt(progressElement.style.width);
          if (currentWidth < 100) {
            progressElement.style.width = `${currentWidth + 25}%`;
          }
        }

        // Save to localStorage
        saveToLocalStorage();
      }

      // Hide learning module
      function hideModule() {
        moduleContent.classList.add("hidden");
        document.querySelector(".learning-modules").classList.remove("hidden");
        document.getElementById("daily-challenge").classList.remove("hidden");
      }

      // Handle daily challenge
      function handleDailyChallenge() {
        const urlOptions = document.querySelectorAll(
          "#daily-challenge .url-option"
        );
        let selectedUrl = null;

        urlOptions.forEach((option) => {
          if (option.classList.contains("selected")) {
            selectedUrl = option.textContent;
          }

          option.addEventListener("click", () => {
            urlOptions.forEach((o) => o.classList.remove("selected"));
            option.classList.add("selected");
          });
        });

        if (!selectedUrl) {
          showNotification("Please select a URL first.", "error");
          return;
        }

        // Check if the answer is correct (first URL is the phishing one)
        if (selectedUrl === "https://secure-paypal.com/login") {
          showNotification(
            "Correct! This is a phishing URL that mimics the real PayPal site.",
            "success"
          );

          // Update user profile
          appState.userProfile.streak++;
          if (appState.userProfile.streak > appState.userProfile.bestStreak) {
            appState.userProfile.bestStreak = appState.userProfile.streak;
          }
        } else {
          showNotification(
            'Incorrect. The phishing URL is "https://secure-paypal.com/login".',
            "error"
          );
          appState.userProfile.streak = 0;
        }

        // Save to localStorage
        saveToLocalStorage();
      }

      // Initialize the application when page loads
      window.addEventListener("load", initApp);
    </script>
  </body>
</html>

